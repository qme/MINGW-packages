--- Python-3.7.0/configure.ac.orig	2018-09-25 20:37:44.457679900 +0200
+++ Python-3.7.0/configure.ac	2018-09-25 21:11:51.536017600 +0200
@@ -5919,7 +5919,9 @@
     CPPFLAGS="$OPENSSL_INCLUDES $CPPFLAGS"
 
     AC_LINK_IFELSE([AC_LANG_PROGRAM([
-        [#include <openssl/x509_vfy.h>]
+        [#define WIN32_LEAN_AND_MEAN 
+         #include <windows.h>
+         #include <openssl/x509_vfy.h>]
     ], [
         [X509_VERIFY_PARAM *p = X509_VERIFY_PARAM_new();]
         [X509_VERIFY_PARAM_set1_host(p, "localhost", 0);]
--- Python-3.7.0/m4/ax_check_openssl.m4.orig	2018-09-25 20:58:06.392520200 +0200
+++ Python-3.7.0/m4/ax_check_openssl.m4	2018-09-25 21:11:25.390371700 +0200
@@ -106,7 +106,9 @@
     LIBS="$OPENSSL_LIBS $LIBS"
     CPPFLAGS="$OPENSSL_INCLUDES $CPPFLAGS"
     AC_LINK_IFELSE(
-        [AC_LANG_PROGRAM([#include <openssl/ssl.h>], [SSL_new(NULL)])],
+        [AC_LANG_PROGRAM([#define WIN32_LEAN_AND_MEAN 
+                          #include <windows.h>
+                          #include <openssl/ssl.h>], [SSL_new(NULL)])],
         [
             AC_MSG_RESULT([yes])
             $1
